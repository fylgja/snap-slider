(()=>{var n=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML="<style>:host{display:block}</style><slot></slot>",this.track=null,this.pager=null,this.slides=[],this.inViewObserver=null,this.mutationObserver=null,this.resizeObserver=null,this.navBtns=[],this.initialLoad=!0,this.slideLabelSepparator=this.dataset.slideLabelSepparator||"of",this.useAutoPager=this.hasAttribute("data-auto-pager"),this.sliderLabel=this.getAttribute("aria-label")?.toLowerCase().trim().replace(/[^a-z0-9_-]+/g,"-").replace(/^-+|-+$/g,""),this.sliderId=this.id||this.sliderLabel||"slider",this.markerIdName="data-target-id",this.pagerClasses=this.dataset.pagerClass||"pager",this.markerClasses=this.dataset.markerClass||"pager-item"}connectedCallback(){if(this.track=this.querySelector("[data-track]"),!this.track){console.warn(`No Slider track defined, reverting back to CSS slider.
Please create a wrapper element for your slides with the attribute data-track`);return}this.pager=this.querySelector("[data-pager]"),this.navBtns=Array.from(this.querySelectorAll("[data-next], [data-prev]")),this.refreshSlides(),this.setupNav(),this.setupEventListeners(),this.setupMutationObserver(),this.setupResizeObserver()}disconnectedCallback(){this.inViewObserver?.disconnect(),this.mutationObserver?.disconnect(),this.resizeObserver?.disconnect(),this.removeEventListeners()}roundUpIfGreaterThan(t,i=8){return t-Math.floor(t)>=i?Math.ceil(t):Math.floor(t)}getInViewItems(){let t=this.track.querySelectorAll("[data-in-view]"),i=t[0]||null,r=t[t.length-1]||null,s=i===this.slides[0],e=r===this.slides[this.slides.length-1];return{inViewSlides:t,totalInViewSlides:t.length,firstInViewSlide:i,lastInViewSlide:r,isAtStart:s,isAtEnd:e,hasNoOverflow:s&&e}}groupPagerMarkers(){if(!this.pager)return;let t=this.roundUpIfGreaterThan(this.track.offsetWidth/this.slides[0].offsetWidth);Array.from(this.pager.querySelectorAll("a, button")).forEach((r,s)=>{r.style.display=s%t===0?null:"none"})}handleInView(t){t.forEach(e=>{let a=this.pager&&(this.pager.querySelector(`[href="#${e.target.id}"]`)||this.pager.querySelector(`[${this.markerIdName}="${e.target.id}"]`));e.target.toggleAttribute("data-in-view",e.isIntersecting),e.target.toggleAttribute("inert",!e.isIntersecting),a?.setAttribute("aria-current",e.isIntersecting),a?.setAttribute("tabindex",e.isIntersecting?"0":"-1")});let{isAtStart:i,isAtEnd:r,hasNoOverflow:s}=this.getInViewItems();if(this.navBtns.forEach(e=>{e.hasAttribute("data-next")&&(e.style.visibility=s?"hidden":null,r?e.setAttribute("disabled",""):e.removeAttribute("disabled")),e.hasAttribute("data-prev")&&(e.style.visibility=s?"hidden":null,i?e.setAttribute("disabled",""):e.removeAttribute("disabled"))}),this.pager&&(this.pager.style.visibility=s?"hidden":null),this.initialLoad?this.initialLoad=!1:this.dispatchEvent(new CustomEvent("slideChange",{detail:this.getInViewItems()})),document.activeElement?.parentElement?.hasAttribute("data-pager")){let e=this.pager.querySelectorAll('[tabindex="0"]');e.length&&e[0].focus()}}getSlides(){return this.track?Array.from(this.track.children).filter(t=>t.tagName.toLowerCase()!=="template"&&t.tagName.toLowerCase()!=="script"):[]}refreshSlides(){this.initialLoad=!0,this.slides=this.getSlides(),this.setupSlides(),this.useAutoPager?this.createPager():this.setupPager(),this.groupPagerMarkers(),this.setupObservers()}setupSlides(){this.slides.forEach((t,i)=>{let r=this.slides.length,s=i+1,a=(t.getAttribute("aria-label")||"").startsWith(`${s} ${this.slideLabelSepparator} `);t.setAttribute("aria-roledescription","item"),t.hasAttribute("id")||t.setAttribute("id",`${this.sliderId}-item-${s}`),(!t.hasAttribute("aria-label")||a)&&t.setAttribute("aria-label",`${s} ${this.slideLabelSepparator} ${r}`),t.hasAttribute("role")||t.setAttribute("role","group")}),this.hasAttribute("role")||this.setAttribute("role","region"),this.hasAttribute("aria-roledescription")||this.setAttribute("aria-roledescription","carousel"),this.track.setAttribute("tabindex",0),this.track.setAttribute("aria-live","polite")}setupNav(){this.navBtns.forEach(t=>{t.setAttribute("disabled",""),t.removeAttribute("hidden"),t.classList.remove("invisible"),t.style.visibility=null})}createPager(){let t=document.createElement("nav");t.setAttribute("data-pager",""),t.setAttribute("role","tablist"),t.classList.add(...this.pagerClasses.split(" ")),this.slides.forEach((i,r)=>{let s=document.createElement("button"),e=i.id||`${this.sliderId}-item-${r+1}`;s.setAttribute(this.markerIdName,e),s.classList.add(...this.markerClasses.split(" ")),this.setupPagerMarker(s,r),t.appendChild(s)}),this.pager?(this.track.setAttribute("role","tabpanel"),this.track.removeAttribute("aria-roledescription"),this.pager.setAttribute("role","tablist"),this.pager.replaceChildren(...t.children)):(this.track.after(t),this.pager=this.querySelector("[data-pager]"))}setupPager(){if(!this.pager)return;this.track.setAttribute("role","tabpanel"),this.track.removeAttribute("aria-roledescription"),this.pager.setAttribute("role","tablist"),Array.from(this.pager.querySelectorAll("a, button")).forEach((i,r)=>this.setupPagerMarker(i,r))}setupPagerMarker(t,i){let r=t.getAttribute("href")?.slice(1)||t.getAttribute(this.markerIdName),s=r||`${this.sliderId}-item-${i+1}`;r||t.setAttribute(this.markerIdName,s),t.setAttribute("role","tab"),t.setAttribute("aria-controls",s),t.setAttribute("aria-posinset",i+1),t.setAttribute("aria-setsize",this.slides.length),t.setAttribute("tabindex","-1"),t.hasAttribute("aria-label")||t.setAttribute("aria-label",`Slide ${i+1}`)}setupObservers(){this.inViewObserver&&this.inViewObserver.disconnect(),this.inViewObserver=new IntersectionObserver(this.handleInView.bind(this),{root:this.track,threshold:.8}),this.slides.forEach(t=>this.inViewObserver.observe(t))}setupMutationObserver(){this.mutationObserver=new MutationObserver(this.refreshSlides.bind(this)),this.mutationObserver.observe(this.track,{childList:!0,subtree:!1})}setupResizeObserver(){this.resizeObserver=new ResizeObserver(this.groupPagerMarkers.bind(this)),this.resizeObserver.observe(this)}goToSlideDir(t="next"){let{firstInViewSlide:i,lastInViewSlide:r}=this.getInViewItems(),s=t==="prev",e=s?i?.previousElementSibling:r?.nextElementSibling;e&&(e.tagName.toLowerCase()==="template"&&(e=s?e?.previousElementSibling:e?.nextElementSibling),e.scrollIntoView({block:"nearest",inline:s?"end":"start",behavior:"smooth"}))}pagerToSlide(t){if(!t.target.closest("[data-pager]"))return;let i=t.target.closest("a, button");if(!i)return;t.preventDefault();let r=i.getAttribute("href")?.slice(1)||i.getAttribute(this.markerIdName);this.track.querySelector(`#${r}`)?.scrollIntoView({block:"nearest",inline:"start",behavior:"smooth"})}setupEventListeners(){this.eventHandler=this.eventHandler.bind(this),this.addEventListener("click",this.eventHandler),this.addEventListener("keydown",this.eventHandler)}removeEventListeners(){this.removeEventListener("click",this.eventHandler),this.removeEventListener("keydown",this.eventHandler)}eventHandler(t){let i=t.target.closest("[data-next], [data-prev], [data-pager]");i&&(t.type==="click"&&(i.hasAttribute("data-next")?this.goToSlideDir("next"):i.hasAttribute("data-prev")?this.goToSlideDir("prev"):i.closest("[data-pager]")&&this.pagerToSlide(t)),t.type==="keydown"&&i.closest("[data-pager]")&&(t.key==="ArrowRight"?this.goToSlideDir("next"):t.key==="ArrowLeft"&&this.goToSlideDir("prev")))}},l=n;customElements.define("snap-slider",l);})();
