(()=>{var l=class extends HTMLElement{constructor(){super(),this.track=null,this.prevBtn=null,this.nextBtn=null,this.pager=null,this.slides=[]}connectedCallback(){this.track=this.querySelector("[data-track]"),this.prevBtn=this.querySelector("[data-prev]"),this.nextBtn=this.querySelector("[data-next]"),this.pager=this.querySelector("[data-pager]");let e=this.getAttribute("use-nav")||this.getAttribute("data-use-nav");if(!this.track){console.error("No Slider track defined, please create a wrapper element with the `data-track`");return}(!this.prevBtn||!this.nextBtn)&&e!=="false"&&this.generateNavButtons(),this.slides=Array.from(this.track.children),this.setupAriaAttributes(),this.setupPagerLinks(),this.setupNavigationButtons(),this.setupObservers(),this.setupMutationObserver()}refreshSlides(){this.slides=Array.from(this.track.children),this.setupObservers(),this.updatePager()}setupAriaAttributes(){this.hasAttribute("role")||this.setAttribute("role","region"),this.hasAttribute("aria-roledescription")||this.setAttribute("aria-roledescription","carousel"),this.track.hasAttribute("role")||this.track.setAttribute("role","group"),this.track.setAttribute("tabindex",0),this.track.setAttribute("aria-live","polite")}setupObservers(){this.inViewObserver&&this.inViewObserver.disconnect();let e={root:null,threshold:.5};this.inViewObserver=new IntersectionObserver(this.handleInView.bind(this),e),this.slides.forEach((t,i)=>{t.setAttribute("aria-roledescription","item");let s=this.slides.length,r=i+1,a=this.getAttribute("aria-slide-of-label")||this.getAttribute("data-aria-slide-of-label")||"of",n=t.getAttribute("aria-label")||"";(!t.hasAttribute("aria-label")||n.startsWith(`${r} ${a} `))&&t.setAttribute("aria-label",`${r} ${a} ${s}`),this.inViewObserver.observe(t)})}setupMutationObserver(){new MutationObserver(()=>{this.refreshSlides()}).observe(this.track,{childList:!0,subtree:!1})}handleInView(e){e.forEach(t=>{t.isIntersecting?(t.target.setAttribute("data-in-view",""),t.target.removeAttribute("inert","")):(t.target.removeAttribute("data-in-view"),t.target.setAttribute("inert",""))}),this.updatePager(),this.checkSliderBounds()}getInViewItems(){let e=this.track.querySelectorAll("[data-in-view]");return{length:e.length,first:e[0],last:e[e.length-1],all:e}}checkSliderBounds(){let{first:e,last:t}=this.getInViewItems();this.updateButtonState(this.prevBtn,e===this.slides[0]),this.updateButtonState(this.nextBtn,t===this.slides[this.slides.length-1])}updateButtonState(e,t){e&&(t?e.setAttribute("disabled",""):e.removeAttribute("disabled"))}setupNavigationButtons(){this.prevBtn?.removeAttribute("hidden"),this.nextBtn?.removeAttribute("hidden"),this.setupButton(this.prevBtn,"previous"),this.setupButton(this.nextBtn,"next")}setupButton(e,t){e&&e.addEventListener("click",()=>{let{first:i,last:s}=this.getInViewItems();(t==="previous"?i.previousElementSibling:s.nextElementSibling)?.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"})})}generateNavButtons(){let e=document.createElement("div");e.classList.add("flex","align-center","gap"),["prev","next"].forEach(t=>{let i=document.createElement("button");i.setAttribute(`data-${t}`,""),i.setAttribute("aria-label",t==="prev"?"Previous Slide":"Next Slide"),i.textContent=t==="prev"?"\u2190":"\u2192",e.appendChild(i)}),this.prevBtn=e.querySelector("[data-prev]"),this.nextBtn=e.querySelector("[data-next]"),this.insertAdjacentElement("beforeEnd",e)}updatePager(){if(!this.pager)return;let e=this.getInViewItems().all,t=Array.from(this.pager.querySelectorAll("a, button"));t.forEach(i=>{i.setAttribute("aria-current","false"),i.setAttribute("tabindex","-1")}),e.forEach(i=>{let s=i.id;t.forEach(r=>{(r.getAttribute("href")?.slice(1)||r.getAttribute("data-slide-id"))===s&&(r.setAttribute("aria-current","true"),r.setAttribute("tabindex","0"))})})}setupPagerLinks(){if(!this.pager)return;this.track.setAttribute("role","tabpanel"),this.track.removeAttribute("aria-roledescription"),this.pager.setAttribute("role","tablist"),Array.from(this.pager.querySelectorAll("a, button")).forEach((t,i)=>{t.setAttribute("role","tab");let s=t.getAttribute("href")?.slice(1)||t.getAttribute("data-slide-id");t.setAttribute("aria-controls",s),t.setAttribute("aria-posinset",i+1),t.setAttribute("aria-setsize",this.slides.length),t.hasAttribute("aria-label")||t.setAttribute("aria-label",`Slide ${i+1}`)}),this.pager.addEventListener("click",t=>{let i=t.target.closest("a, button");if(!i)return;t.preventDefault();let s=i.getAttribute("href")?.slice(1)||i.getAttribute("data-slide-id"),r=this.track.querySelector(`#${s}`);r&&r.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"})}),this.pager.addEventListener("keydown",t=>{let i=document.activeElement;if(!i.parentElement.hasAttribute("data-pager"))return;let{first:s,last:r}=this.getInViewItems(),a,n;t.key==="ArrowRight"?(a=i.nextElementSibling,n=r.nextElementSibling):t.key==="ArrowLeft"&&(a=i.previousElementSibling,n=s.previousElementSibling),a&&(a.focus(),n?.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}))})}};customElements.define("snap-slider",l);})();
