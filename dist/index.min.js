(()=>{var h=class extends HTMLElement{static observedAttributes=["data-slide-of-label","slide-of-label"];constructor(){if(super(),this.initialLoad=!0,this.toPrevSlide=this.toPrevSlide.bind(this),this.toNextSlide=this.toNextSlide.bind(this),this.pagerClick=this.pagerClick.bind(this),this.pagerKeydown=this.pagerKeydown.bind(this),this.track=this.querySelector("[data-track]"),!this.track)return console.warn(`No Slider track defined, reverting back to CSS slider.
Please create a wrapper element for your slides with the attribute data-track`);this.sliderLabel=this.hasAttribute("aria-label")&&this.getAttribute("aria-label").toLowerCase().trim().replace(/[^a-z0-9_-]+/g,"-").replace(/^-+|-+$/g,""),this.sliderId=this.id||this.sliderLabel||"slider",this.prevBtn=this.querySelector("[data-prev]"),this.nextBtn=this.querySelector("[data-next]"),this.pager=this.querySelector("[data-pager]")}connectedCallback(){let t=this.getAttribute("data-slide-of-label")||this.getAttribute("slide-of-label")||"of",e=this.hasAttribute("data-auto-pager")||this.hasAttribute("auto-pager"),i=this.hasAttribute("data-group-pager")||this.hasAttribute("group-pager");this.inViewObserver=null,this.mutationObserver=null,this.resizeObserver=null,this.options={initOfText:t,ofText:t,autoPager:e,groupPager:i||e},this.slides=this.getSlides(),this.options.autoPager?(this.createPager(),this.pager=this.querySelector("[data-pager]")):this.pager&&this.setupPager(),this.pager&&(this.track.setAttribute("role","tabpanel"),this.track.removeAttribute("aria-roledescription"),this.pager.addEventListener("click",this.pagerClick),this.pager.addEventListener("keydown",this.pagerKeydown),this.options.groupPager&&this.setupResizeObserver()),this.setupWrapper(),this.setupSlides(),this.setupNavButtons(),this.setupObservers(),this.setupMutationObserver()}disconnectedCallback(){this.inViewObserver&&this.inViewObserver.disconnect(),this.mutationObserver&&this.mutationObserver.disconnect(),this.resizeObserver&&this.resizeObserver.disconnect(),this.prevBtn&&this.prevBtn.removeEventListener("click",this.toPrevSlide),this.nextBtn&&this.nextBtn.removeEventListener("click",this.toNextSlide),this.pager&&(this.pager.removeEventListener("click",this.pagerClick),this.pager.removeEventListener("keydown",this.pagerKeydown))}attributeChangedCallback(t,e,i){e!==null&&(t==="data-slide-of-label"||t==="slide-of-label")&&(this.options.initOfText=e,this.options.ofText=i,this.setupSlides())}setupObservers(){this.inViewObserver&&this.inViewObserver.disconnect(),this.inViewObserver=new IntersectionObserver(this.handleInView.bind(this),{root:this.track,threshold:.5}),this.slides.forEach(t=>this.inViewObserver.observe(t))}setupMutationObserver(){this.mutationObserver=new MutationObserver(this.refreshSlides.bind(this)),this.mutationObserver.observe(this.track,{childList:!0,subtree:!1})}setupResizeObserver(){this.resizeObserver=new ResizeObserver(this.groupPagerLinks.bind(this)),this.resizeObserver.observe(this)}setupWrapper(){getComputedStyle(this).display==="inline"&&(this.style.display="block"),this.hasAttribute("role")||this.setAttribute("role","region"),this.hasAttribute("aria-roledescription")||this.setAttribute("aria-roledescription","carousel"),this.track.hasAttribute("role")||this.track.setAttribute("role","group"),this.track.setAttribute("tabindex",0),this.track.setAttribute("aria-live","polite")}setupSlides(){this.slides.forEach((t,e)=>{let{initOfText:i,ofText:s}=this.options,r=this.slides.length,a=e+1,l=(t.getAttribute("aria-label")||"").startsWith(`${a} ${i} `);t.setAttribute("aria-roledescription","item"),!t.hasAttribute("id")&&this.pager&&t.setAttribute("id",`${this.sliderId}-item-${a}`),(!t.hasAttribute("aria-label")||l)&&t.setAttribute("aria-label",`${a} ${s} ${r}`)})}setupNavButtons(){!this.prevBtn||!this.nextBtn||(this.prevBtn.removeAttribute("hidden"),this.nextBtn.removeAttribute("hidden"),this.prevBtn.addEventListener("click",this.toPrevSlide),this.nextBtn.addEventListener("click",this.toNextSlide))}getSlides(){return this.track?Array.from(this.track.children).filter(t=>t.tagName.toLowerCase()!=="template"):[]}getInViewItems(){let t=this.track.querySelectorAll("[data-in-view]"),e=t[0]||null,i=t[t.length-1]||null,s=e===this.slides[0],r=i===this.slides[this.slides.length-1],a=s&&r;return{inViewSlides:t,totalInViewSlides:t.length,firstInViewSlide:e,lastInViewSlide:i,isAtStart:s,isAtEnd:r,hasNoOverflow:a}}checkSliderBounds(){let{isAtStart:t,isAtEnd:e,hasNoOverflow:i}=this.getInViewItems();this.nextBtn&&(this.nextBtn.style.visibility=i?"hidden":null,e?this.nextBtn.setAttribute("disabled",""):this.nextBtn.removeAttribute("disabled")),this.prevBtn&&(this.prevBtn.style.visibility=i?"hidden":null,t?this.prevBtn.setAttribute("disabled",""):this.prevBtn.removeAttribute("disabled")),this.pager&&(this.pager.style.visibility=i?"hidden":null)}slideChange(){this.dispatchEvent(new CustomEvent("slideChange",{detail:this.getInViewItems()}))}handleInView(t){if(t.forEach(e=>{let i=this.pager&&(this.pager.querySelector(`[href="#${e.target.id}"]`)||this.pager.querySelector(`[data-slide-id="${e.target.id}"]`));e.isIntersecting?(e.target.setAttribute("data-in-view",""),e.target.removeAttribute("inert",""),i?.setAttribute("aria-current","true"),i?.setAttribute("tabindex","0")):(e.target.removeAttribute("data-in-view"),e.target.setAttribute("inert",""),i?.setAttribute("aria-current","false"),i?.setAttribute("tabindex","-1"))}),this.checkSliderBounds(),this.initialLoad?this.initialLoad=!1:this.slideChange(),document.activeElement.parentElement.hasAttribute("data-pager")){let e=this.pager.querySelectorAll('[tabindex="0"]');e.length&&e[0].focus()}}refreshSlides(){this.initialLoad=!0,this.slides=this.getSlides(),this.options.autoPager?(this.createPager(),this.groupPagerLinks()):this.pager&&this.setupPager(),this.setupSlides(),this.setupObservers()}toNextSlide(){let{lastInViewSlide:t}=this.getInViewItems();t?.nextElementSibling?.scrollIntoView({block:"nearest",inline:"start",behavior:"smooth"})}toPrevSlide(){let{firstInViewSlide:t}=this.getInViewItems();t?.previousElementSibling?.scrollIntoView({block:"nearest",inline:"end",behavior:"smooth"})}createPager(){let t=document.createElement("nav");t.setAttribute("data-pager",""),t.setAttribute("role","tablist"),t.classList.add("pager"),this.slides.forEach((e,i)=>{let s=document.createElement("button"),r=e.id||`${this.sliderId}-item-${i+1}`;s.setAttribute("data-slide-id",r),this.setupPagerMarker(s,i),t.appendChild(s)}),this.pager?(this.pager.setAttribute("role","tablist"),this.pager.replaceChildren(...t.children)):this.appendChild(t)}removePager(){this.pager.replaceChildren()}setupPager(){this.pager.setAttribute("role","tablist"),Array.from(this.pager.querySelectorAll("a, button")).forEach((e,i)=>this.setupPagerMarker(e,i))}setupPagerMarker(t,e){let i=t.getAttribute("href")?.slice(1)||t.getAttribute("data-slide-id");t.setAttribute("role","tab"),t.setAttribute("aria-controls",i),t.setAttribute("aria-posinset",e+1),t.setAttribute("aria-setsize",this.slides.length),t.setAttribute("tabindex","-1"),t.hasAttribute("aria-label")||t.setAttribute("aria-label",`Slide ${e+1}`)}groupPagerLinks(){let t=Math.round(this.clientWidth/this.slides[0].clientWidth);Array.from(this.pager.querySelectorAll("a, button")).forEach((i,s)=>{i.style.display=s%t===0?null:"none"})}pagerClick(t){let e=t.target.closest("a, button");if(!e)return;t.preventDefault();let i=e.getAttribute("href")?.slice(1)||e.getAttribute("data-slide-id");this.track.querySelector(`#${i}`)?.scrollIntoView({block:"nearest",inline:"start",behavior:"smooth"})}pagerKeydown(t){t.key==="ArrowRight"?this.toNextSlide():t.key==="ArrowLeft"&&this.toPrevSlide()}},n=h;customElements.define("snap-slider",n);})();
